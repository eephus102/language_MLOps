# <component>
$schema: https://azuremlschemas.azureedge.net/latest/commandComponent.schema.json

# Reference documentation: https://learn.microsoft.com/en-us/azure/machine-learning/how-to-use-batch-endpoint?tabs=python

name: azureml_textclassificationsinglelabel_deploy
version: 0.0.1
display_name: Deploy for TextClassificationSingleLabel
is_deterministic: True
type: command
description: Component to deploy finetuned model for single label classification task
inputs:
  endpoint_name:
    type: string
    optional: False
    description: The name of the batch endpoint. Needs to be unique at the Azure region level.
  auth_mode:
    type: string
    optional: True
    default: "key"
    description: The authentication method for the batch endpoint. Currently only Azure Active Directory token-based authentication (aad_token) is supported.

code: ../create_endpoint
environment: azureml://registries/azureml-preview/environments/finetune-acpt-pytorch-111-py38-cuda113-gpu/versions/0.0.5
resources:
  instance_count: 1
command: python create_online_endpoint.py --endpoint_name ${{inputs.endpoint_name}} $[[--auth_mode ${{inputs.auth_mode}}]] 